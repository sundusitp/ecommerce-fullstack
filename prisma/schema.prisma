generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"  // üëà ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å sqlite ‡πÄ‡∏õ‡πá‡∏ô postgresql
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  password  String
  name      String?
  role      String   @default("USER")
  createdAt DateTime @default(now())

  // üëá ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: User 1 ‡∏Ñ‡∏ô ‡∏°‡∏µ‡πÑ‡∏î‡πâ‡∏´‡∏•‡∏≤‡∏¢ Order
  orders    Order[]
}

model Product {
  id        Int      @id @default(autoincrement())
  name      String
  price     Float
  stock     Int      @default(0)
  imageUrl  String?
  createdAt DateTime @default(now())

  // üëá ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå: ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 1 ‡∏ä‡∏¥‡πâ‡∏ô ‡πÑ‡∏õ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏¥‡∏•‡πÑ‡∏î‡πâ
  orderItems OrderItem[]
}

// ‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà: ‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (Header)
model Order {
  id         Int      @id @default(autoincrement())
  createdAt  DateTime @default(now())
  totalPrice Float
  status     String   @default("PENDING") // PENDING=‡∏£‡∏≠‡∏à‡πà‡∏≤‡∏¢, PAID=‡∏à‡πà‡∏≤‡∏¢‡πÅ‡∏•‡πâ‡∏ß

  userId     Int
  user       User     @relation(fields: [userId], references: [id])

  items      OrderItem[]
}

// ‚úÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà: ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏¢‡πà‡∏≠‡∏¢‡πÉ‡∏ô‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠ (Detail)
model OrderItem {
  id        Int     @id @default(autoincrement())
  quantity  Int     @default(1) // ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Å‡∏µ‡πà‡∏ä‡∏¥‡πâ‡∏ô
  price     Float   // ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡πà‡∏≠‡∏ä‡∏¥‡πâ‡∏ô ‡∏ì ‡∏ï‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠

  orderId   Int
  order     Order   @relation(fields: [orderId], references: [id])

  productId Int
  product   Product @relation(fields: [productId], references: [id])
}